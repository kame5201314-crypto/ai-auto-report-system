# ========================================
# Vibe-Pay 金流橋接器 - 環境變數配置
# ========================================
# 警告：此為範本文件，請複製為 .env 並填入您的實際金鑰
# 嚴禁將含有真實金鑰的 .env 檔案提交到版本控制
# ========================================

# ----------------------------------------
# 藍新金流商店設定 (必填)
# ----------------------------------------
# 商店代號 (從藍新商店後台取得)
NEWEBPAY_MERCHANT_ID=your_merchant_id

# HashKey (32 字元，從藍新商店後台取得)
# 用於 AES-256-CBC 加密
NEWEBPAY_HASH_KEY=your_32_character_hash_key_here

# HashIV (16 字元，從藍新商店後台取得)
# 用於 AES-256-CBC 初始向量
NEWEBPAY_HASH_IV=your_16_char_iv_

# ----------------------------------------
# 環境設定
# ----------------------------------------
# 是否為正式環境 (true = 正式, false = 測試)
# 測試環境: ccore.newebpay.com
# 正式環境: core.newebpay.com
NEWEBPAY_IS_PRODUCTION=false

# API 版本 (MPG 使用 2.0, Period 使用 1.0)
NEWEBPAY_VERSION=2.0

# ----------------------------------------
# 回呼 URL 設定
# ----------------------------------------
# 付款完成後跳轉網址 (前端頁面)
NEWEBPAY_RETURN_URL=https://your-domain.com/payment/return

# 付款結果通知網址 (後端 Webhook)
NEWEBPAY_NOTIFY_URL=https://your-domain.com/api/payment/notify

# 取消付款返回網址
NEWEBPAY_CLIENT_BACK_URL=https://your-domain.com/payment/cancel

# 定期定額每期扣款通知網址
NEWEBPAY_PERIOD_NOTIFY_URL=https://your-domain.com/api/payment/period-notify

# ----------------------------------------
# 冪等性機制設定
# ----------------------------------------
# Key 過期時間 (毫秒，預設 24 小時)
IDEMPOTENCY_KEY_TTL=86400000

# 處理鎖定超時 (毫秒，預設 5 分鐘)
IDEMPOTENCY_LOCK_TIMEOUT=300000

# 最大重試次數
IDEMPOTENCY_MAX_RETRIES=3

# 是否啟用分散式鎖 (多實例部署時建議開啟)
IDEMPOTENCY_DISTRIBUTED_LOCK=false

# 管理員金鑰 (用於強制解除鎖定)
IDEMPOTENCY_ADMIN_KEY=your_admin_secret_key

# ----------------------------------------
# Supabase 設定
# ----------------------------------------
# Supabase 專案 URL
VITE_SUPABASE_URL=https://your-project.supabase.co

# Supabase Anon Key (前端使用)
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key

# Supabase Service Role Key (後端使用，權限較高)
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# ----------------------------------------
# 進階設定 (選填)
# ----------------------------------------
# 是否啟用安全審計日誌
PAYMENT_AUDIT_LOG_ENABLED=true

# 審計日誌最大保留數量
PAYMENT_AUDIT_LOG_MAX=1000

# 是否啟用詳細錯誤訊息 (僅開發環境)
PAYMENT_DEBUG_MODE=false
